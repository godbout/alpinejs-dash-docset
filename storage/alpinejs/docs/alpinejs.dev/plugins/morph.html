<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../css/app.css%3Fid=8f234a1ce84613005d1d.css">

    <script defer src="https://unpkg.com/@alpinejs/intersect@3.7.0/dist/cdn.min.js"></script>
    <script defer src="https://unpkg.com/@alpinejs/persist@3.7.0/dist/cdn.min.js"></script>
    <script defer src="https://unpkg.com/@alpinejs/trap@3.7.0/dist/cdn.min.js"></script>
    <script defer src="https://unpkg.com/@alpinejs/collapse@3.7.0/dist/cdn.min.js"></script>
    <script defer src="https://unpkg.com/@alpinejs/morph@3.7.0/dist/cdn.min.js"></script>
    <!-- <script defer src="http://alpine.test/packages/alpinejs/dist/cdn.min.js"></script> -->
    <script defer src="https://unpkg.com/alpinejs@3.7.0/dist/cdn.min.js"></script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Karla:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- Social Media -->
    <meta name="twitter:card" content="summary_large_image">
            <meta name="og:title" content="Morph — Alpine.js">
                <meta name="og:description" content="Morph an element into the provided HTML">
    <meta name="og:image" content="https://alpinejs.dev/social_morph.jpg">

            <title>Morph — Alpine.js</title>
    
    <meta name="description" content="Morph an element into the provided HTML">

    <!-- Favicon -->
    <link rel="icon" href="../favicon.png">

    <style>
         h1, h2, h3, h4, .font-title { font-family: 'Karla', system-ui, -apple-system, /* Firefox supports this but not yet `system-ui` */ 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji'; }
        code { font-family: MonoLisa, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace }
        html { scroll-behavior: smooth;  }
        .text-brand { color: hsl(193 42% 49% / 1); }
        ::selection { background-color: #c9f3fd; }
    </style>

            <!-- Fathom - beautiful, simple website analytics -->
        <script src="https://fancyrat.calebporzio.com/script.js" data-site="AROBLZOR" defer></script>
    </head>
<body>
    <header style="height: 4rem" class="bg-white fixed flex items-center justify-between left-0 right-0 top-0 z-10">
        <div class="text-2xl font-semibold md:w-64 text-gray-800 hover:text-gray-900 pl-6 py-0">
            <a href="../index.html" class="flex items-center">
                <img src="../alpine_long.svg" class="w-[290px]" alt="">
            </a>
        </div>

        <div class="space-x-6 text-brand-dark hidden md:flex justify-end items-center w-64 pr-6 py-4">
            <a href="https://github.com/alpinejs/alpine" class="block hover:text-gray-600"><svg class="fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>GitHub</title><path d="M10 0a10 10 0 0 0-3.16 19.49c.5.1.68-.22.68-.48l-.01-1.7c-2.78.6-3.37-1.34-3.37-1.34-.46-1.16-1.11-1.47-1.11-1.47-.9-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.9 1.52 2.34 1.08 2.91.83.1-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.94 0-1.1.39-1.99 1.03-2.69a3.6 3.6 0 0 1 .1-2.64s.84-.27 2.75 1.02a9.58 9.58 0 0 1 5 0c1.91-1.3 2.75-1.02 2.75-1.02.55 1.37.2 2.4.1 2.64.64.7 1.03 1.6 1.03 2.69 0 3.84-2.34 4.68-4.57 4.93.36.31.68.92.68 1.85l-.01 2.75c0 .26.18.58.69.48A10 10 0 0 0 10 0"></path></svg></a>
            <a href="https://twitter.com/Alpine_JS" class="block hover:text-gray-600"><svg class="fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Twitter</title><path d="M6.29 18.25c7.55 0 11.67-6.25 11.67-11.67v-.53c.8-.59 1.49-1.3 2.04-2.13-.75.33-1.54.55-2.36.65a4.12 4.12 0 0 0 1.8-2.27c-.8.48-1.68.81-2.6 1a4.1 4.1 0 0 0-7 3.74 11.65 11.65 0 0 1-8.45-4.3 4.1 4.1 0 0 0 1.27 5.49C2.01 8.2 1.37 8.03.8 7.7v.05a4.1 4.1 0 0 0 3.3 4.03 4.1 4.1 0 0 1-1.86.07 4.1 4.1 0 0 0 3.83 2.85A8.23 8.23 0 0 1 0 16.4a11.62 11.62 0 0 0 6.29 1.84"></path></svg></a>
            <a href="https://alpinejs.codewithhugo.com/chat/" class="block hover:text-gray-600"><svg class="fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 146 146"><title>Discord</title><path d="M107.75 125.001s-4.5-5.375-8.25-10.125c16.375-4.625 22.625-14.875 22.625-14.875-5.125 3.375-10 5.75-14.375 7.375-6.25 2.625-12.25 4.375-18.125 5.375-12 2.25-23 1.625-32.375-.125-7.125-1.375-13.25-3.375-18.375-5.375-2.875-1.125-6-2.5-9.125-4.25-.375-.25-.75-.375-1.125-.625-.25-.125-.375-.25-.5-.375-2.25-1.25-3.5-2.125-3.5-2.125s6 10 21.875 14.75c-3.75 4.75-8.375 10.375-8.375 10.375-27.625-.875-38.125-19-38.125-19 0-40.25 18-72.875 18-72.875 18-13.5 35.125-13.125 35.125-13.125l1.25 1.5c-22.5 6.5-32.875 16.375-32.875 16.375s2.75-1.5 7.375-3.625c13.375-5.875 24-7.5 28.375-7.875.75-.125 1.375-.25 2.125-.25 7.625-1 16.25-1.25 25.25-.25 11.875 1.375 24.625 4.875 37.625 12 0 0-9.875-9.375-31.125-15.875l1.75-2S110 19.626 128 33.126c0 0 18 32.625 18 72.875 0 0-10.625 18.125-38.25 19zM49.625 66.626c-7.125 0-12.75 6.25-12.75 13.875s5.75 13.875 12.75 13.875c7.125 0 12.75-6.25 12.75-13.875.125-7.625-5.625-13.875-12.75-13.875zm45.625 0c-7.125 0-12.75 6.25-12.75 13.875s5.75 13.875 12.75 13.875c7.125 0 12.75-6.25 12.75-13.875s-5.625-13.875-12.75-13.875z" fill-rule="nonzero"></path></svg></a>
        </div>

        <div class="md:hidden flex items-center pr-6" x-data="{ show: false }">
            <button class="text-gray-600 focus:outline-none" x-on:click="show = ! show">
                <svg x-show="! show" class="fill-current w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg>
                <svg x-show="show" class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
            </button>

            <div class="bg-gray-100 bottom-0 fixed p-6 right-0 shadow-xl w-1/2 overflow-y-auto" style="top: 4rem" x-show="show"
                x-transition:enter="transition ease-in-out duration-300 transform"
                x-transition:enter-start="translate-x-full"
                x-transition:enter-end="translate-x-0"
                x-transition:leave="transition ease-in-out duration-300 transform"
                x-transition:leave-start="translate-x-0"
                x-transition:leave-end="translate-x-full">
                <ul class="space-y-2 text-gray-800">
                                                                        <li  class="font-medium" ><a href="../start-here.html" class="hover:text-gray-900">Start Here</a></li>
                                                                                                <li  class="font-medium" ><a href="../upgrade-guide.html" class="hover:text-gray-900">Upgrade From V2</a></li>
                                                                                                <li>
                                <span class="font-medium">Essentials</span>
                                <ul class="pl-3">
                                                                        <li   class=""  ><a href="../essentials/installation.html" class="hover:text-gray-900">Installation</a></li>
                                                                        <li   class=""  ><a href="../essentials/state.html" class="hover:text-gray-900">State</a></li>
                                                                        <li   class=""  ><a href="../essentials/templating.html" class="hover:text-gray-900">Templating</a></li>
                                                                        <li   class=""  ><a href="../essentials/events.html" class="hover:text-gray-900">Events</a></li>
                                                                        <li   class=""  ><a href="../essentials/lifecycle.html" class="hover:text-gray-900">Lifecycle</a></li>
                                                                    </ul>
                            </li>
                                                                                                <li>
                                <span class="font-medium">Directives</span>
                                <ul class="pl-3">
                                                                        <li   class=""  ><a href="../directives/data.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>data</a></li>
                                                                        <li   class=""  ><a href="../directives/init.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>init</a></li>
                                                                        <li   class=""  ><a href="../directives/show.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>show</a></li>
                                                                        <li   class=""  ><a href="../directives/bind.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>bind</a></li>
                                                                        <li   class=""  ><a href="../directives/on.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>on</a></li>
                                                                        <li   class=""  ><a href="../directives/text.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>text</a></li>
                                                                        <li   class=""  ><a href="../directives/html.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>html</a></li>
                                                                        <li   class=""  ><a href="../directives/model.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>model</a></li>
                                                                        <li   class=""  ><a href="../directives/for.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>for</a></li>
                                                                        <li   class=""  ><a href="../directives/transition.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>transition</a></li>
                                                                        <li   class=""  ><a href="../directives/effect.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>effect</a></li>
                                                                        <li   class=""  ><a href="../directives/ignore.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>ignore</a></li>
                                                                        <li   class=""  ><a href="../directives/ref.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>ref</a></li>
                                                                        <li   class=""  ><a href="../directives/cloak.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>cloak</a></li>
                                                                        <li   class=""  ><a href="../directives/teleport.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>teleport</a></li>
                                                                        <li   class=""  ><a href="../directives/if.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>if</a></li>
                                                                        <li   class=""  ><a href="../directives/id.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>id</a></li>
                                                                    </ul>
                            </li>
                                                                                                <li>
                                <span class="font-medium">Magics</span>
                                <ul class="pl-3">
                                                                        <li   class=""  ><a href="../magics/el.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>el</a></li>
                                                                        <li   class=""  ><a href="../magics/refs.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>refs</a></li>
                                                                        <li   class=""  ><a href="../magics/store.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>store</a></li>
                                                                        <li   class=""  ><a href="../magics/watch.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>watch</a></li>
                                                                        <li   class=""  ><a href="../magics/dispatch.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>dispatch</a></li>
                                                                        <li   class=""  ><a href="../magics/nextTick.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>nextTick</a></li>
                                                                        <li   class=""  ><a href="../magics/root.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>root</a></li>
                                                                        <li   class=""  ><a href="../magics/data.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>data</a></li>
                                                                        <li   class=""  ><a href="../magics/id.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>id</a></li>
                                                                    </ul>
                            </li>
                                                                                                <li>
                                <span class="font-medium">Globals</span>
                                <ul class="pl-3">
                                                                        <li   class=""  ><a href="../globals/alpine-data.html" class="hover:text-gray-900"> <span class="text-brand-light">Alpine.</span>data()</a></li>
                                                                        <li   class=""  ><a href="../globals/alpine-store.html" class="hover:text-gray-900"> <span class="text-brand-light">Alpine.</span>store()</a></li>
                                                                    </ul>
                            </li>
                                                                                                <li>
                                <span class="font-medium">Plugins</span>
                                <ul class="pl-3">
                                                                        <li   class=""  ><a href="intersect.html" class="hover:text-gray-900">Intersect</a></li>
                                                                        <li   class=""  ><a href="persist.html" class="hover:text-gray-900">Persist</a></li>
                                                                        <li   class=""  ><a href="trap.html" class="hover:text-gray-900">Trap</a></li>
                                                                        <li   class=""  ><a href="collapse.html" class="hover:text-gray-900">Collapse</a></li>
                                                                        <li   class=""  ><a href="morph.html" class="hover:text-gray-900">Morph</a></li>
                                                                    </ul>
                            </li>
                                                                                                <li>
                                <span class="font-medium">Advanced</span>
                                <ul class="pl-3">
                                                                        <li   class=""  ><a href="../advanced/reactivity.html" class="hover:text-gray-900">Reactivity</a></li>
                                                                        <li   class=""  ><a href="../advanced/extending.html" class="hover:text-gray-900">Extending</a></li>
                                                                        <li   class=""  ><a href="../advanced/async.html" class="hover:text-gray-900">Async</a></li>
                                                                        <li   class=""  ><a href="../advanced/csp.html" class="hover:text-gray-900">CSP</a></li>
                                                                    </ul>
                            </li>
                                                            </ul>
            </div>
        </div>
    </header>

    <style>[hover-scrollbar] { overflow-x: 'visible'; overflow-y: hidden; } [hover-scrollbar]:hover { overflow-y: auto }</style>
    <aside style="top: 4rem" class="fixed pb-6 pt-8 px-8 left-0 bottom-0 hidden md:block w-48 lg:w-64" hover-scrollbar>
        <ul class="space-y-2 text-brand-dark">
                            
                                    <li  class="font-medium" ><a href="../start-here.html" class="hover:text-gray-900">Start Here</a></li>
                                                                <li class="font-medium">
                        <a href="../components.html" class="hover:text-gray-900">
                            <div class="relative">
                                Components <span class="hidden lg:inline relative">
                                    <div class="h-full top-0 left-2 flex items-center absolute">
                                        <span class="text-xs bg-brand text-white font-bold px-[.45rem] py-[.1rem] rounded-full whitespace-nowrap">Coming soon!</span>
                                    </div>
                                </span>

                            </div>

                            <ul class="pl-3 relative">
                                <div class="absolute inset-0 bg-gradient-to-b from-[#fff2] to-white"></div>
                                <li>Modal</li>
                                <li>Dropdown</li>
                            </ul>
                        </a>
                    </li>
                
                                    <li  class="font-medium" ><a href="../upgrade-guide.html" class="hover:text-gray-900">Upgrade From V2</a></li>
                                            
                                    <li>
                        <span class="font-medium">Essentials</span>
                        <ul class="pl-3">
                                                        <li   class=""  ><a href="../essentials/installation.html" class="hover:text-gray-900">Installation</a></li>
                                                        <li   class=""  ><a href="../essentials/state.html" class="hover:text-gray-900">State</a></li>
                                                        <li   class=""  ><a href="../essentials/templating.html" class="hover:text-gray-900">Templating</a></li>
                                                        <li   class=""  ><a href="../essentials/events.html" class="hover:text-gray-900">Events</a></li>
                                                        <li   class=""  ><a href="../essentials/lifecycle.html" class="hover:text-gray-900">Lifecycle</a></li>
                                                    </ul>
                    </li>
                                            
                                    <li>
                        <span class="font-medium">Directives</span>
                        <ul class="pl-3">
                                                        <li   class=""  ><a href="../directives/data.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>data</a></li>
                                                        <li   class=""  ><a href="../directives/init.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>init</a></li>
                                                        <li   class=""  ><a href="../directives/show.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>show</a></li>
                                                        <li   class=""  ><a href="../directives/bind.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>bind</a></li>
                                                        <li   class=""  ><a href="../directives/on.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>on</a></li>
                                                        <li   class=""  ><a href="../directives/text.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>text</a></li>
                                                        <li   class=""  ><a href="../directives/html.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>html</a></li>
                                                        <li   class=""  ><a href="../directives/model.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>model</a></li>
                                                        <li   class=""  ><a href="../directives/for.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>for</a></li>
                                                        <li   class=""  ><a href="../directives/transition.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>transition</a></li>
                                                        <li   class=""  ><a href="../directives/effect.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>effect</a></li>
                                                        <li   class=""  ><a href="../directives/ignore.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>ignore</a></li>
                                                        <li   class=""  ><a href="../directives/ref.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>ref</a></li>
                                                        <li   class=""  ><a href="../directives/cloak.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>cloak</a></li>
                                                        <li   class=""  ><a href="../directives/teleport.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>teleport</a></li>
                                                        <li   class=""  ><a href="../directives/if.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>if</a></li>
                                                        <li   class=""  ><a href="../directives/id.html" class="hover:text-gray-900"> <span class="text-brand-light">x-</span>id</a></li>
                                                    </ul>
                    </li>
                                            
                                    <li>
                        <span class="font-medium">Magics</span>
                        <ul class="pl-3">
                                                        <li   class=""  ><a href="../magics/el.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>el</a></li>
                                                        <li   class=""  ><a href="../magics/refs.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>refs</a></li>
                                                        <li   class=""  ><a href="../magics/store.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>store</a></li>
                                                        <li   class=""  ><a href="../magics/watch.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>watch</a></li>
                                                        <li   class=""  ><a href="../magics/dispatch.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>dispatch</a></li>
                                                        <li   class=""  ><a href="../magics/nextTick.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>nextTick</a></li>
                                                        <li   class=""  ><a href="../magics/root.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>root</a></li>
                                                        <li   class=""  ><a href="../magics/data.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>data</a></li>
                                                        <li   class=""  ><a href="../magics/id.html" class="hover:text-gray-900"> <span class="text-brand-light">$</span>id</a></li>
                                                    </ul>
                    </li>
                                            
                                    <li>
                        <span class="font-medium">Globals</span>
                        <ul class="pl-3">
                                                        <li   class=""  ><a href="../globals/alpine-data.html" class="hover:text-gray-900"> <span class="text-brand-light">Alpine.</span>data()</a></li>
                                                        <li   class=""  ><a href="../globals/alpine-store.html" class="hover:text-gray-900"> <span class="text-brand-light">Alpine.</span>store()</a></li>
                                                    </ul>
                    </li>
                                            
                                    <li>
                        <span class="font-medium">Plugins</span>
                        <ul class="pl-3">
                                                        <li   class=""  ><a href="intersect.html" class="hover:text-gray-900">Intersect</a></li>
                                                        <li   class=""  ><a href="persist.html" class="hover:text-gray-900">Persist</a></li>
                                                        <li   class=""  ><a href="trap.html" class="hover:text-gray-900">Trap</a></li>
                                                        <li   class=""  ><a href="collapse.html" class="hover:text-gray-900">Collapse</a></li>
                                                        <li   style="margin-left: -2.75rem" class="border-brand border-l-4 pl-10 font-semibold"  ><a href="morph.html" class="hover:text-gray-900">Morph</a></li>
                                                    </ul>
                    </li>
                                            
                                    <li>
                        <span class="font-medium">Advanced</span>
                        <ul class="pl-3">
                                                        <li   class=""  ><a href="../advanced/reactivity.html" class="hover:text-gray-900">Reactivity</a></li>
                                                        <li   class=""  ><a href="../advanced/extending.html" class="hover:text-gray-900">Extending</a></li>
                                                        <li   class=""  ><a href="../advanced/async.html" class="hover:text-gray-900">Async</a></li>
                                                        <li   class=""  ><a href="../advanced/csp.html" class="hover:text-gray-900">CSP</a></li>
                                                    </ul>
                    </li>
                                    </ul>
    </aside>

    <main class="pt-24 pl-0 md:pl-48 lg:pl-64 pr-0 xl:pr-64">
        <style>
            .markdown>*+* { margin-top: 1.5rem; }
            .markdown p { line-height: 1.75; }
            .markdown h1, .markdown h2, .markdown h3 { color: #2d3342; scroll-margin-top: 4rem; font-weight: 800; letter-spacing: -.025em; }
            .markdown h1, .markdown h2 { border-bottom-width: 1px; border-color: #edf2f7; }
            .markdown h1 { font-size: 2.25rem; }
            .markdown h2 { font-size: 1.5rem; }
            .markdown h3 { font-size: 1.25rem; }
            .markdown ul { list-style-type: disc; }
            .markdown a { color: hsl(192deg 51% 46%); font-weight: 600; }
            .markdown h1 a, .markdown h2 a, .markdown h3 a { position: relative; color: #2d3342; font-weight: 800; }
            .markdown h1 a::before, .markdown h2 a::before, .markdown h3 a::before {
                position: absolute;
                left: -1.35rem;
                content: "# ";
                color: rgba(175, 187, 199);
                font-weight: 600;
            }
            .markdown h1 a:hover::before, .markdown h2 a:hover::before, .markdown h3 a:hover::before {
                color: #7e8a9e;
            }
            .markdown code { white-space: nowrap; padding-top: .1rem; padding-bottom: .1rem; padding-left: .25rem; padding-right: .25rem; font-size: .875rem; font-weight: 600; border-radius: .25rem; background-color: #edf2f7; }
            pre {
                overflow-y: auto;
                background: #f6f7f9;
                font-size: .875rem;
                border-radius: .25rem;
                margin-top: 1rem;
                margin-bottom: 1rem;
                overflow-x: auto;
                background: #f6f7f9;
            }
            pre code.torchlight {
                display: block;
                min-width: -webkit-max-content;
                min-width: -moz-max-content;
                min-width: max-content;
                padding-top: 1rem;
                padding-bottom: 1rem;
                padding-left: 0;
                padding-right: 0;
                background-color: #f6f7f9 !important;
                white-space: pre;
                font-weight: 400;
            }
            pre code.torchlight .line {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            pre code.torchlight .line-number,
            pre code.torchlight .summary-caret {
                margin-right: 1rem;
            }
            .markdown blockquote { font-size: .95em; color: #2d3748; padding: 1rem; border-left-width: 4px; border-color: rgba(119, 193, 210); background: #f6f7f9; }
            .markdown table tbody td { border-color: #d8dee9; border-width: 1px; padding: .25rem .5rem }
            .demo { background: white; padding: 1rem; border-width: 1px; border-radius: .25rem; border-color: #d8dee9; }
            .demo li { list-style-position: inside; }
            .demo button { padding: 0 .5rem; border-width: 1px; border-radius: .25rem; border-color: #a0aec0; background-color: #e2e8f0; }
            .demo button:hover { background-color: #edf2f7; }
            .demo input, .demo textarea, .demo select { padding: .25rem .5rem; border-width: 1px; border-radius: .25rem; border-color: #cbd5e0; }
            .demo input[type="checkbox"] { padding: 0; }
            .demo input[type="radio"] { padding: 0; border-radius: 999px; }
            .demo select { padding-right: 2.5rem; }
            /* .demo input[type="radio"] { border-radius: 999px; } */
        </style>
        <div class="m-auto max-w-3xl px-6 pb-24 text-gray-800 antialiased markdown" listen-for-intersection-of-titles>
            <h1>Morph Plugin</h1>
<p>Alpine's Morph plugin allows you to &quot;morph&quot; an element on the page into the provided HTML template, all while preserving any browser or Alpine state within the &quot;morphed&quot; element.</p>
<p>This is useful for updating HTML from a server request without loosing Alpine's on-page state. A utility like this is at the core of full-stack frameworks like <a href="https://laravel-livewire.com/">Laravel Livewire</a> and <a href="https://dockyard.com/blog/2018/12/12/phoenix-liveview-interactive-real-time-apps-no-need-to-write-javascript">Phoenix LiveView</a>.</p>
<p>The best way to understand its purpose is with the following interactive visualization. Give it a try!</p>

<div x-data="{ slide: 1 }" class="border rounded">
    <div>
        <img :src="'/img/morphs/morph'+slide+'.png'">
    </div>

    <div class="flex w-full justify-between" style="padding-bottom: 1rem">
        <div class="w-1/2 px-4">
            <button @click="slide = (slide === 1) ? 13 : slide - 1" class="w-full bg-brand rounded-full text-center py-3 font-bold text-white">Previous</button>
        </div>
        <div class="w-1/2 px-4">
            <button @click="slide = (slide % 13) + 1" class="w-full bg-brand rounded-full text-center py-3 font-bold text-white">Next</button>
        </div>
    </div>
</div>

<h2 id="installation"><a href="morph.html#installation">Installation</a></h2>
<p>You can use this plugin by either including it from a <code>&lt;script&gt;</code> tag or installing it via NPM:</p>
<h3>Via CDN</h3>
<p>You can include the CDN build of this plugin as a <code>&lt;script&gt;</code> tag, just make sure to include it BEFORE Alpine's core JS file.</p>
<pre><code class='torchlight' style='background-color: #fff; --theme-selection-background: #e2e5e9;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #6A737D;">&lt;!-- Alpine Plugins --&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;</span><span style="color: #22863A;">script</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">defer</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">src</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;https://unpkg.com/@alpinejs/<a href="../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="5835372a2830186b76207620">[email&#160;protected]</a>/dist/cdn.min.js&quot;</span><span style="color: #24292E;">&gt;&lt;/</span><span style="color: #22863A;">script</span><span style="color: #24292E;">&gt;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #6A737D;">&lt;!-- Alpine Core --&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;</span><span style="color: #22863A;">script</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">defer</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">src</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;https://unpkg.com/<a href="../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="56373a263f38333c251665782e782e">[email&#160;protected]</a>/dist/cdn.min.js&quot;</span><span style="color: #24292E;">&gt;&lt;/</span><span style="color: #22863A;">script</span><span style="color: #24292E;">&gt;</span></div></code></pre>
<h3>Via NPM</h3>
<p>You can install Morph from NPM for use inside your bundle like so:</p>
<pre><code class='torchlight' style='background-color: #fff; --theme-selection-background: #e2e5e9;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #6F42C1;">npm</span><span style="color: #24292E;"> </span><span style="color: #032F62;">install</span><span style="color: #24292E;"> </span><span style="color: #032F62;">@alpinejs/morph</span></div></code></pre>
<p>Then initialize it from your bundle:</p>
<pre><code class='torchlight' style='background-color: #fff; --theme-selection-background: #e2e5e9;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #D73A49;">import</span><span style="color: #24292E;"> Alpine </span><span style="color: #D73A49;">from</span><span style="color: #24292E;"> </span><span style="color: #032F62;">&#39;alpinejs&#39;</span></div><div class='line'><span style="color: #D73A49;">import</span><span style="color: #24292E;"> morph </span><span style="color: #D73A49;">from</span><span style="color: #24292E;"> </span><span style="color: #032F62;">&#39;@alpinejs/morph&#39;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">window.Alpine </span><span style="color: #D73A49;">=</span><span style="color: #24292E;"> Alpine</span></div><div class='line'><span style="color: #24292E;">Alpine.</span><span style="color: #6F42C1;">plugin</span><span style="color: #24292E;">(morph)</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #D73A49;">...</span></div></code></pre>
<h2 id="alpine-morph"><a href="morph.html#alpine-morph">Alpine.morph()</a></h2>
<p>The <code>Alpine.morph(el, newHtml)</code> allows you to imperatively morph a dom node based on passed in HTML. It accepts the following parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>el</code></td>
<td>A DOM element on the page.</td>
</tr>
<tr>
<td><code>newHtml</code></td>
<td>A string of HTML to use as the template to morph the dom element into.</td>
</tr>
<tr>
<td><code>options</code> (optional)</td>
<td>An options object used mainly for <a href="morph.html#lifecycle-hooks">injecting lifecycle hooks</a>.</td>
</tr>
</tbody>
</table>
<p>Here's an example of using <code>Alpine.morph()</code> to update an Alpine component with new HTML: (In real apps, this new HTML would likely be coming from the server)</p>
<pre><code class='torchlight' style='background-color: #fff; --theme-selection-background: #e2e5e9;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #24292E;">&lt;</span><span style="color: #22863A;">div</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">x-data</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;</span><span style="color: #24292E;">{ message: </span><span style="color: #032F62;">&#39;Change me, then press the button!&#39;</span><span style="color: #24292E;"> }</span><span style="color: #032F62;">&quot;</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">input</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">type</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;text&quot;</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">x-model</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;</span><span style="color: #24292E;">message</span><span style="color: #032F62;">&quot;</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">span</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">x-text</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;</span><span style="color: #24292E;">message</span><span style="color: #032F62;">&quot;</span><span style="color: #24292E;">&gt;&lt;/</span><span style="color: #22863A;">span</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;/</span><span style="color: #22863A;">div</span><span style="color: #24292E;">&gt;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">&lt;</span><span style="color: #22863A;">button</span><span style="color: #24292E;">&gt;Run Morph&lt;/</span><span style="color: #22863A;">button</span><span style="color: #24292E;">&gt;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">&lt;</span><span style="color: #22863A;">script</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    document.</span><span style="color: #6F42C1;">querySelector</span><span style="color: #24292E;">(</span><span style="color: #032F62;">&#39;button&#39;</span><span style="color: #24292E;">).</span><span style="color: #6F42C1;">addEventListener</span><span style="color: #24292E;">(</span><span style="color: #032F62;">&#39;click&#39;</span><span style="color: #24292E;">, () </span><span style="color: #D73A49;">=&gt;</span><span style="color: #24292E;"> {</span></div><div class='line'><span style="color: #24292E;">        </span><span style="color: #D73A49;">let</span><span style="color: #24292E;"> el </span><span style="color: #D73A49;">=</span><span style="color: #24292E;"> document.</span><span style="color: #6F42C1;">querySelector</span><span style="color: #24292E;">(</span><span style="color: #032F62;">&#39;div&#39;</span><span style="color: #24292E;">)</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">        Alpine.</span><span style="color: #6F42C1;">morph</span><span style="color: #24292E;">(el, </span><span style="color: #032F62;">`</span></div><div class='line'><span style="color: #032F62;">            &lt;div x-data=&quot;{ message: &#39;Change me, then press the button!&#39; }&quot;&gt;</span></div><div class='line'><span style="color: #032F62;">                &lt;h2&gt;See how new elements have been added&lt;/h2&gt;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #032F62;">                &lt;input type=&quot;text&quot; x-model=&quot;message&quot;&gt;</span></div><div class='line'><span style="color: #032F62;">                &lt;span x-text=&quot;message&quot;&gt;&lt;/span&gt;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #032F62;">                &lt;h2&gt;but the state of this component hasn&#39;t changed? Magical.&lt;/h2&gt;</span></div><div class='line'><span style="color: #032F62;">            &lt;/div&gt;</span></div><div class='line'><span style="color: #032F62;">        `</span><span style="color: #24292E;">)</span></div><div class='line'><span style="color: #24292E;">    })</span></div><div class='line'><span style="color: #24292E;">&lt;/</span><span style="color: #22863A;">script</span><span style="color: #24292E;">&gt;</span></div></code></pre>

<div class="demo">
    <div x-data="{ message: 'Change me, then press the button!' }" id="morph-demo-1" class="space-y-2">
        <input type="text" x-model="message" class="w-full">
        <span x-text="message"></span> 
    </div>
    
    <button id="morph-button-1" class="mt-4">Run Morph</button>
</div>

<script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    document.querySelector('#morph-button-1').addEventListener('click', () => {
        let el = document.querySelector('#morph-demo-1')

        Alpine.morph(el, `
            <div x-data="{ message: 'Change me, then press the button!' }" id="morph-demo-1" class="space-y-2">
                <h4>See how new elements have been added</h4>
                <input type="text" x-model="message" class="w-full"> 
                <span x-text="message"></span> 
                <h4>but the state of this component hasn't changed? Magical.</h4>
            </div>
        `)
    })
</script>

<h3 id="lifecycle-hooks"><a href="morph.html#lifecycle-hooks">Lifecycle Hooks</a></h3>
<p>The &quot;Morph&quot; plugin works by comparing two DOM trees, the live element, and the passed in HTML.</p>
<p>Morph walks both trees simultaneusly and compares each node and its children. If it finds differences, it &quot;patches&quot; (changes) the current DOM tree to match the passed in HTML's tree.</p>
<p>While the default algorithm is very capable, there are cases where you may want to hook into its lifecycle and observe or change its behavior as it's happening.</p>
<p>Before we jump into the available Lifecycle hooks themselves, let's first list out all the potential parameters they receive and explain what each one is:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>el</code></td>
<td>This is always the actual, current, DOM element on the page that will be &quot;patched&quot; (changed by Morph).</td>
</tr>
<tr>
<td><code>toEl</code></td>
<td>This is a &quot;template element&quot;. It's a temporary element representing what the live <code>el</code> will be patched to. It will never actually live on the page and should only be used for reference purposes.</td>
</tr>
<tr>
<td><code>childrenOnly()</code></td>
<td>This is a function that can be called inside the hook to tell Morph to skip the current element and only &quot;patch&quot; its children.</td>
</tr>
<tr>
<td><code>skip()</code></td>
<td>A function that when called within the hook will &quot;skip&quot; comparing/patching itself and the children of the current element.</td>
</tr>
</tbody>
</table>
<p>Here are the available lifecycle hooks (passed in as the third parameter to <code>Alpine.morph(..., options)</code>):</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>updating(el, toEl, childrenOnly, skip)</code></td>
<td>Called before patching the <code>el</code> with the comparison <code>toEl</code>.</td>
</tr>
<tr>
<td><code>updated(el, toEl)</code></td>
<td>Called after Morph has patched <code>el</code>.</td>
</tr>
<tr>
<td><code>removing(el, skip)</code></td>
<td>Called before Morph removes an element from the live DOM.</td>
</tr>
<tr>
<td><code>removed(el)</code></td>
<td>Called after Morph has removed an element from the live DOM.</td>
</tr>
<tr>
<td><code>adding(el, sip)</code></td>
<td>Called before adding a new element.</td>
</tr>
<tr>
<td><code>added(el)</code></td>
<td>Called after adding a new element to the live DOM tree.</td>
</tr>
<tr>
<td><code>key(el)</code></td>
<td>A re-usable function to determine how Morph &quot;keys&quot; elements in the tree before comparing/patching. <a href="morph.html#keys">More on that here</a></td>
</tr>
<tr>
<td><code>lookahead</code></td>
<td>A boolean value telling Morph to enable an extra feature in its algorithm that &quot;looks ahead&quot; to make sure a DOM element that's about to be removed should instead just be &quot;moved&quot; to a later sibling.</td>
</tr>
</tbody>
</table>
<p>Here is code of all these lifecycle hooks for a more concrete reference:</p>
<pre><code class='torchlight' style='background-color: #fff; --theme-selection-background: #e2e5e9;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #24292E;">Alpine.</span><span style="color: #6F42C1;">morph</span><span style="color: #24292E;">(el, newHtml, {</span></div><div class='line'><span style="color: #24292E;">    </span><span style="color: #6F42C1;">updating</span><span style="color: #24292E;">(</span><span style="color: #E36209;">el</span><span style="color: #24292E;">, </span><span style="color: #E36209;">toEl</span><span style="color: #24292E;">, </span><span style="color: #E36209;">childrenOnly</span><span style="color: #24292E;">, </span><span style="color: #E36209;">skip</span><span style="color: #24292E;">) {</span></div><div class='line'><span style="color: #24292E;">        </span><span style="color: #6A737D;">//</span></div><div class='line'><span style="color: #24292E;">    },</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">    </span><span style="color: #6F42C1;">updated</span><span style="color: #24292E;">(</span><span style="color: #E36209;">el</span><span style="color: #24292E;">, </span><span style="color: #E36209;">toEl</span><span style="color: #24292E;">) {</span></div><div class='line'><span style="color: #24292E;">        </span><span style="color: #6A737D;">//</span></div><div class='line'><span style="color: #24292E;">    },</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">    </span><span style="color: #6F42C1;">removing</span><span style="color: #24292E;">(</span><span style="color: #E36209;">el</span><span style="color: #24292E;">, </span><span style="color: #E36209;">skip</span><span style="color: #24292E;">) {</span></div><div class='line'><span style="color: #24292E;">        </span><span style="color: #6A737D;">//</span></div><div class='line'><span style="color: #24292E;">    },</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">    </span><span style="color: #6F42C1;">removed</span><span style="color: #24292E;">(</span><span style="color: #E36209;">el</span><span style="color: #24292E;">) {</span></div><div class='line'><span style="color: #24292E;">        </span><span style="color: #6A737D;">//</span></div><div class='line'><span style="color: #24292E;">    },</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">    </span><span style="color: #6F42C1;">adding</span><span style="color: #24292E;">(</span><span style="color: #E36209;">el</span><span style="color: #24292E;">, </span><span style="color: #E36209;">skip</span><span style="color: #24292E;">) {</span></div><div class='line'><span style="color: #24292E;">        </span><span style="color: #6A737D;">//</span></div><div class='line'><span style="color: #24292E;">    },</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">    </span><span style="color: #6F42C1;">added</span><span style="color: #24292E;">(</span><span style="color: #E36209;">el</span><span style="color: #24292E;">) {</span></div><div class='line'><span style="color: #24292E;">        </span><span style="color: #6A737D;">//</span></div><div class='line'><span style="color: #24292E;">    },</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">    </span><span style="color: #6F42C1;">key</span><span style="color: #24292E;">(</span><span style="color: #E36209;">el</span><span style="color: #24292E;">) {</span></div><div class='line'><span style="color: #24292E;">        </span><span style="color: #6A737D;">// By default Alpine uses the `key=&quot;&quot;` HTML attribute.</span></div><div class='line'><span style="color: #24292E;">        </span><span style="color: #D73A49;">return</span><span style="color: #24292E;"> el.id</span></div><div class='line'><span style="color: #24292E;">    },</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E;">    lookahead: </span><span style="color: #005CC5;">true</span><span style="color: #24292E;">, </span><span style="color: #6A737D;">// Default: false</span></div><div class='line'><span style="color: #24292E;">})</span></div></code></pre>
<h3 id="keys"><a href="morph.html#keys">Keys</a></h3>
<p>Dom-diffing utilities like Morph try their best to accurately &quot;morph&quot; the original DOM into the new HTML. However, there are cases where it's impossible to determine if an element should be just changed, or replaced completely.</p>
<p>Because of this limitation, Morph has a &quot;key&quot; system that allows developers to &quot;force&quot; preserving certain elements rather than replacing them.</p>
<p>The most common use-case for them is a list of siblings within a loop. Below is an example of why keys are necessary sometimes:</p>
<pre><code class='torchlight' style='background-color: #fff; --theme-selection-background: #e2e5e9;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #6A737D;">&lt;!-- &quot;Live&quot; Dom on the page: --&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;</span><span style="color: #22863A;">ul</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;Mark&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;Tom&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;Travis&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;/</span><span style="color: #22863A;">ul</span><span style="color: #24292E;">&gt;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #6A737D;">&lt;!-- New HTML to &quot;morph to&quot;: --&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;</span><span style="color: #22863A;">ul</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;Travis&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;Mark&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;Tom&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;/</span><span style="color: #22863A;">ul</span><span style="color: #24292E;">&gt;</span></div></code></pre>
<p>Given the above situation, Morph has no way to know that the &quot;Travis&quot; node has been moved in the DOM tree. It just thinks that &quot;Mark&quot; has been changed to &quot;Travis&quot; and &quot;Travis&quot; changed to &quot;Tom&quot;.</p>
<p>This is not what we actually want, we want Morph to preserve the original elements and instead of changing them, MOVE them within the <code>&lt;ul&gt;</code>.</p>
<p>By adding keys to each node, we can accomplish this like so:</p>
<pre><code class='torchlight' style='background-color: #fff; --theme-selection-background: #e2e5e9;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #6A737D;">&lt;!-- &quot;Live&quot; Dom on the page: --&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;</span><span style="color: #22863A;">ul</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">key</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;1&quot;</span><span style="color: #24292E;">&gt;Mark&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">key</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;2&quot;</span><span style="color: #24292E;">&gt;Tom&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">key</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;3&quot;</span><span style="color: #24292E;">&gt;Travis&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;/</span><span style="color: #22863A;">ul</span><span style="color: #24292E;">&gt;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #6A737D;">&lt;!-- New HTML to &quot;morph to&quot;: --&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;</span><span style="color: #22863A;">ul</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">key</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;3&quot;</span><span style="color: #24292E;">&gt;Travis&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">key</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;1&quot;</span><span style="color: #24292E;">&gt;Mark&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">    &lt;</span><span style="color: #22863A;">li</span><span style="color: #24292E;"> </span><span style="color: #6F42C1;">key</span><span style="color: #24292E;">=</span><span style="color: #032F62;">&quot;2&quot;</span><span style="color: #24292E;">&gt;Tom&lt;/</span><span style="color: #22863A;">li</span><span style="color: #24292E;">&gt;</span></div><div class='line'><span style="color: #24292E;">&lt;/</span><span style="color: #22863A;">ul</span><span style="color: #24292E;">&gt;</span></div></code></pre>
<p>Now that there are &quot;keys&quot; on the <code>&lt;li&gt;</code>s, Morph will match them in both trees and move them accordingly.</p>
<p>You can configure what Morph considers a &quot;key&quot; with the <code>key:</code> configutation option. <a href="morph.html#lifecycle-hooks">More on that here</a></p>

            <div class="border-gray-200 border-t flex justify-between pt-4 text-gray-700">
                <div>
                                            <a class="text-brand font-bold" href="collapse.html">← Collapse</a>
                                    </div>

                <div>
                                            <a class="text-brand font-bold" href="../advanced/reactivity.html">Reactivity →</a>
                                    </div>
            </div>
            <p class="mt-6 text-sm text-gray-600 text-center">Code highlighting provided by <a href="https://torchlight.dev" target="__blank">Torchlight</a></p>
        </div>
    </main>

    <aside
        x-data="visibleNavHighlighter"
        x-on:scroll.window.throttle.50ms="onScroll()"
        style="top: 4rem" class="fixed py-8 px-6 right-0 bottom-0 w-64 overflow-y-auto hidden xl:block"
    >
        <span x-show="headings.length > 0" class="block font-semibold mb-2 text-brand-light text-sm uppercase tracking-wider">On this page</span>

        <ul class="space-y-3 text-gray-800">
            <template x-for="heading in headings">
                <li class="text-sm text-gray-600" :class="heading.tagName.toLowerCase() === 'h3' && 'ml-4'">
                    <a
                        :href="'#'+heading.id"
                        class="hover:text-gray-900"
                        :class="visibleHeadingId == heading.id && 'font-medium text-gray-900'"
                        x-text="heading.innerText"
                    ></a>
                </li>
            </template>
        </ul>

        <div class="mt-8 block bg-[#F6F7F9] p-6">
            <h3 class="text-2xl font-bold font-title text-brand-dark">
                Alpine Components Are Coming!
            </h3>

            <a href="../components.html" class="mt-4 flex items-center justify-center bg-brand px-4 py-1 font-title text-white text-sm text-center font-bold rounded-full">
                Take a peak <span class="ml-2 text-xl font-normal">&rarr;</span>
            </a>
        </div>
    </aside>

    <script>
        document.addEventListener('alpine:initializing', () => {
            Alpine.data('visibleNavHighlighter', () => ({
                headings: undefined,
                visibleHeadingId: null,

                init() {
                    // Grab all the headings inside the main container.
                    this.headings = document.querySelectorAll('[listen-for-intersection-of-titles] h2, [listen-for-intersection-of-titles] h3')

                    this.assignHeadingIds()

                    this.onScroll()
                },

                assignHeadingIds() {
                    // If a heading doesn't have an [id], we'll give it one
                    // based on its text content.
                    this.headings.forEach(heading => {
                        if (heading.id) return

                        heading.id = heading.textContent.replace(/\s+/g, '-').toLowerCase()
                    })
                },

                onScroll() {
                    // We're gonna highlight the first heading above an imaginary
                    // drawn horizontally across the center of the screen.

                    // Get the distance from the top of that line.
                    let relativeTop = window.innerHeight / 2

                    let headingsByDistanceFromTop = {}

                    // Populate an object of headings by their distance from our
                    // imaginary lines as the keys.
                    this.headings.forEach(heading => {
                        headingsByDistanceFromTop[heading.getBoundingClientRect().top - relativeTop] = heading
                    })

                    // Grab the first one that is above that line.
                    let closestNegativeTop = Math.max(...Object.keys(headingsByDistanceFromTop).filter(top => top < 0))

                    // If we couldn't find one, don't highlight anything.
                    if (closestNegativeTop >= 0 || [Infinity, NaN, -Infinity].includes(closestNegativeTop)) return this.visibleHeadingId = null

                    // Otherwise, highlight that heading.
                    this.visibleHeadingId = headingsByDistanceFromTop[closestNegativeTop].id
                },
            }))
        })
    </script>
</body>
</html>
 
